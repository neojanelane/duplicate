<!doctype html>
<html lang="en">
  <head>
    <script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.defer=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-WXM4BDT8');
    </script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Rulya team sports finder</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WXM4BDT8"
      height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <section class="hero" aria-label="Hero">
      <video class="hero-video" autoplay muted loop playsinline preload="none" poster="images/poster-image.jpeg">
        <source src="videos/main-video.mp4" type="video/mp4" />
      </video>

      <div class="hero-overlay" aria-hidden="true" style="z-index: 1;"></div>

      <div class="element-glow glow-brand-orange" style="top: -120px; left: -120px;"></div>

      <div class="hero-logo" aria-label="Rulya logo" style="z-index: 3;">
        <img src="images/icon-logo.png" alt="Rulya" />
      </div>

      <div class="container hero-content" style="z-index: 2;">
        <h1>The Easiest Way To Play</h1>
        <p class="hero-subtext">Access local courts, join active matches and connect with other players in Dublin.</p>

        <form class="waitlist-form hero-waitlist" action="#" method="post" novalidate>
          <label class="sr-only" for="hero-email">Email</label>
          <div class="waitlist-row">
            <input id="hero-email" name="email" type="email" placeholder="123@xxx.com" required />
            <button type="submit" class="btn btn-primary">Secure Your Spot</button>
          </div>
          <p class="waitlist-error" id="hero-error" data-error hidden>Please provide a valid email.</p>
          <p class="waitlist-success" id="hero-success" data-success hidden>You’re in.</p>
        </form>
      </div>
    </section>

    <div class="page-gradient">

    <section class="hero hero--plain" aria-label="Intro">
      <div class="container origin">
        <div class="origin-media" aria-hidden="true">
         <img src="images/origin-seagull.png" alt="" width="420" height="420" loading="lazy" />
        </div>

        <div class="origin-copy">
          <h2 class="plain-hero-title">Our Origin Story</h2>
          <p class="plain-hero-sub">"Rulya" is slang for fun, wild, and a little bit crazy. It’s all about breaking the routine. We picked the seagull as our mascot to match that exact carefree energy. They’re just vibing around the city, with no thoughts. We all need to channel our inner seagull sometimes, and get Rulya.</p>
        </div>
      </div>
    </section>

   <style>
      /* Creates the tall track for scrolling */
      .scroll-track {
        height: 300vh; /* 3 times the screen height */
        position: relative;
      }
      
      /* Pins the content to the screen while you scroll down the track */
      .sticky-wrapper {
        position: sticky;
        top: 0;
        height: 100vh;
        display: flex;
        align-items: center;
        overflow: hidden;
      }
    </style>

    <section id="benefits" class="scroll-track">
      <div class="sticky-wrapper">
        <div class="benefits-flex-container" style="width: 100%;">
          
          <div class="text-content benefits-text"> 
            <h2 id="main-heading" class="plain-hero-title benefits-heading" style="transition: opacity 0.4s ease;">
              Join/Host: Join an existing game or host your own.
            </h2>
            <ul id="benefit-list" class="benefits-list"></ul>
            <a href="#waitlist" class="btn btn-primary benefits-cta">
              Secure Your Spot
            </a>
          </div>

          <div class="mockup-container benefits-mockup" style="position: relative;">
            <iframe id="app-iframe" src="https://v0-rulya-social-booking-app-i2e1.vercel.app" class="phone-mockup" loading="lazy" style="background-color: #ffffff; opacity: 1 !important; pointer-events: none;"></iframe>
          </div>

        </div>
      </div>

      <script>
        (function () {
          const section = document.getElementById('benefits');
          const sticky = section ? section.querySelector('.sticky-wrapper') : null;
          const iframe = document.getElementById('app-iframe');
          const heading = document.getElementById('main-heading');
          const list = document.getElementById('benefit-list');

          if (!heading || !section) return;

          let currentTab = 'connect'; // Starting state

          // Show the pinned panel with a subtle slide-in as it enters view
          function ensureVisible(rect) {
            if (!sticky) return;
            const threshold = window.innerHeight * 0.85;
            if (rect.top < threshold) sticky.classList.add('is-visible');
            else sticky.classList.remove('is-visible');
          }

          window.addEventListener('scroll', () => {
            const rect = section.getBoundingClientRect();
            ensureVisible(rect);
            
            // Calculate how far down the 300vh track we have scrolled (0.0 to 1.0)
            const scrollableDistance = rect.height - window.innerHeight;
            let progress = -rect.top / scrollableDistance;
            progress = Math.max(0, Math.min(1, progress));

            // Determine which tab should be active based on scroll depth
            let newTab = 'connect';
            if (progress > 0.33 && progress <= 0.66) {
              newTab = 'courts';
            } else if (progress > 0.66) {
              newTab = 'sports';
            }

            // Only trigger if the tab actually changed
            if (newTab !== currentTab) {
              currentTab = newTab;

              // Swap the website text with a smooth fade
              let newText = '';
              if (newTab === 'connect') newText = 'Join/Host: Join an existing game or host your own.';
              if (newTab === 'courts') newText = 'Discover: Browse venues near you.';
              if (newTab === 'sports') newText = 'Game on: Choose your favourite sport with one click.';

              heading.style.opacity = '0';
              setTimeout(() => {
                heading.innerText = newText;
                if (list) list.innerHTML = '';
                heading.style.opacity = '1';
              }, 400);

              // Send message to the Vercel App to change its UI
              if (iframe && iframe.contentWindow) {
                iframe.contentWindow.postMessage(newTab, '*');
              }
            }
          });
        })();
      </script>
    </section>

<section class="section section-ice section-ice--bottom personas" aria-label="Personas">
      <div class="personas-inner">
        <div class="personas-carousel" data-persona-carousel>
          <div class="personas-track" data-persona-track aria-roledescription="carousel">
            
            <article class="persona-card is-active" data-persona-slide
              data-name=""
              data-headline="Convenient Booking"
              data-sub="Courts, Teammates, Sports all in one page."
              data-trigger="2 clicks to find the game and book the court.">
              <div class="persona-stack" aria-hidden="true" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; border-radius: inherit; overflow: hidden;">
                <img src="images/p1.jpg" alt="" style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0;">
              </div>

              <div class="persona-overlay" aria-live="polite" style="position: relative; z-index: 2;">
                <h2 class="persona-headline">Your teammates are waiting</h2>
                <p class="persona-sub">Easy Budgeting</p>
                <p class="persona-trigger">Convenient Booking</p>
                <a class="btn btn-primary" href="#waitlist">Join waitlist</a>
              </div>
            </article>

            <article class="persona-card" data-persona-slide
              data-name=""
              data-headline="New city. No squad."
              data-sub="You didn’t move countries to stay in."
              data-trigger="Casual badminton 2km away. 4 spots left.">
              <div class="persona-stack" aria-hidden="true" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; border-radius: inherit; overflow: hidden;">
                <img src="images/p2.jpg" alt="" style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0;">
              </div>
              <div class="persona-overlay" aria-hidden="true" style="position: relative; z-index: 2;"></div>
            </article>

            <article class="persona-card" data-persona-slide
              data-name=""
              data-headline="Student-friendly Pricing"
              data-sub="Our “Split-Pay” handles the math, you only pay your share, we handle the rest."
              data-trigger="Split automatically">
              <div class="persona-stack" aria-hidden="true" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; border-radius: inherit; overflow: hidden;">
                <img src="images/p3.jpg" alt="" style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0;">
              </div>
              <div class="persona-overlay" aria-hidden="true" style="position: relative; z-index: 2;"></div>
            </article>

          </div>
        </div>
      </div>
    </section>
    <section id="waitlist" class="section section-ice section-ice--top" aria-label="Waitlist">
      <div class="container signup" style="display: flex; justify-content: center; text-align: center;">
        <div class="signup-left" style="max-width: 600px; margin: 0 auto; padding-right: 0;">
          <h2>Stop cancelling. Start playing.</h2>
          <p class="signup-subtext">Get Early Access Now.</p>

          <form class="waitlist-form" action="#" method="post" novalidate>
            <label class="sr-only" for="waitlist-email">Email</label>

            <div class="waitlist-row" style="justify-content: center;">
              <input
                id="waitlist-email"
                name="email"
                type="email"
                inputmode="email"
                autocomplete="email"
                placeholder="123@xxx.com"
                required
                aria-describedby="waitlist-error waitlist-success"
              />
              <button type="submit" class="btn btn-primary">Secure Your Spot</button>
            </div>

            <p class="waitlist-error" id="waitlist-error" data-error hidden>Please provide a valid email.</p>
            <p class="waitlist-success" id="waitlist-success" data-success hidden>You’re in.</p>
          </form>
        </div>
      </div>
    </section>

   <footer class="footer">
      <div class="footer-inner">
        <div class="footer-col footer-col--social">
          <p class="footer-heading">Social</p>
          <div class="footer-icons" aria-label="Social links">
            <a class="icon" href="https://www.instagram.com/rulya.ie?igsh=aG0zMXJwOG52dmF5" aria-label="Instagram" target="_blank" rel="noopener noreferrer" style="width: 36px; height: 36px; display: inline-block;">
              <img src="images/instagram.png" alt="Instagram" style="width: 100%; height: 100%; object-fit: contain;" />
            </a>
            <a class="icon" href="https://www.linkedin.com/company/rulya/" aria-label="LinkedIn" target="_blank" rel="noopener noreferrer" style="width: 36px; height: 36px; display: inline-block;">
              <img src="images/linkedin.png" alt="LinkedIn" style="width: 100%; height: 100%; object-fit: contain;" />
            </a>
            <a class="icon" href="https://www.tiktok.com/@rulya.ie?_r=1&_t=ZN-94AXZZVxG3a" aria-label="TikTok" target="_blank" rel="noopener noreferrer" style="width: 36px; height: 36px; display: inline-block;">
              <img src="images/tiktok logo.png" alt="TikTok" style="width: 100%; height: 100%; object-fit: contain;" />
            </a>
          </div>
        </div>
      </div>
    </footer>
    </div>

    <script>
      (function () {
        const forms = Array.from(document.querySelectorAll('.waitlist-form'));
        if (!forms.length) return;

        const FORM_ENDPOINT = 'https://docs.google.com/forms/d/e/1FAIpQLSdFKlPUzqqatqOZuyYkz--8ABrA1dQ-wD-i5rlxLm02iBipzw/formResponse';
        const FORM_FIELD = 'entry.1326819543';

        function isEmailValid(input) {
          // Uses native browser validation for type="email".
          // Also trims whitespace so " test@x.com " doesn't fail.
          const v = (input.value || '').trim();
          input.value = v;
          return v.length > 0 && input.checkValidity();
        }

        forms.forEach((form) => {
          const input = form.querySelector('input[type="email"]');
          const success = form.querySelector('[data-success]');
          const error = form.querySelector('[data-error]');

          if (!input || !success || !error) return;

          function resetMessages() {
            success.hidden = true;
            error.hidden = true;
          }

          form.addEventListener('submit', async function (e) {
            e.preventDefault();

            resetMessages();

            if (!input.value || !input.value.trim()) {
              error.textContent = 'Please provide your email to join the waitlist.';
              error.hidden = false;
              input.focus();
              return;
            }

            if (!isEmailValid(input)) {
              error.textContent = 'Please provide a valid email to join the waitlist.';
              error.hidden = false;
              input.focus();
              return;
            }

            // Send to Google Forms (stores in Google Sheets)
            // NOTE: This uses mode:no-cors, so we can't read a success response.
            // We treat 'no network error thrown' as success.
            try {
              const fd = new FormData();
              fd.append(FORM_FIELD, input.value);

              await fetch(FORM_ENDPOINT, {
                method: 'POST',
                mode: 'no-cors',
                body: fd,
              });
            } catch (err) {
              error.textContent = 'Something went wrong. Please try again.';
              error.hidden = false;
              return;
            }

            success.hidden = false;

            // Fire GTM event ONLY on valid submit
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
              event: 'waitlist_submit',
              form_location: form.classList.contains('hero-waitlist') ? 'hero' : 'waitlist_section',
            });

            input.value = '';
          });

          input.addEventListener('input', function () {
            if (error && !error.hidden) error.hidden = true;
          });
        });
      })();
    </script>

    <script>
      (function () {
        const carousel = document.querySelector('[data-persona-carousel]');
        const track = document.querySelector('[data-persona-track]');
        if (!carousel || !track) return;

        const intervalMs = 5200;
        let timer = null;
        let isAnimating = false;

        function slides() {
          return Array.from(track.querySelectorAll('[data-persona-slide]'));
        }

        function setActiveCenter() {
          const s = slides();
          s.forEach((el, i) => {
            const active = i === 1; // center is always index 1
            el.classList.toggle('is-active', active);

            const overlay = el.querySelector('.persona-overlay');
            if (!overlay) return;

            if (active) {
              overlay.removeAttribute('aria-hidden');
              overlay.innerHTML = `
                <p class="persona-name">${el.dataset.name}</p>
                <h2 class="persona-headline">${el.dataset.headline}</h2>
                <p class="persona-sub">${el.dataset.sub}</p>
                <p class="persona-trigger">${el.dataset.trigger}</p>
              `;
            } else {
              overlay.setAttribute('aria-hidden', 'true');
              overlay.innerHTML = '';
            }
          });
        }

        function measureStep() {
          const s = slides();
          if (s.length < 3) return { step: 0, pad: 0 };

          const first = s[0].getBoundingClientRect();
          const second = s[1].getBoundingClientRect();
          const gap = Math.max(0, Math.round(second.left - first.right));
          const step = Math.round(first.width + gap);

          const viewportW = carousel.getBoundingClientRect().width;
          const pad = Math.max(0, Math.round((viewportW - first.width) / 2));

          return { step, pad };
        }

        function applyCentering() {
          const { step, pad } = measureStep();
          if (!step) return;

          track.classList.add('is-no-anim');
          track.style.paddingLeft = pad + 'px';
          track.style.paddingRight = pad + 'px';
          track.style.transform = `translateX(${-step}px)`; // center slide at index 1
          track.getBoundingClientRect(); // force reflow
          track.classList.remove('is-no-anim');
        }

        function shiftLeft() {
          if (isAnimating) return;
          const { step } = measureStep();
          if (!step) return;

          isAnimating = true;
          track.style.transform = `translateX(${-2 * step}px)`;

          const onEnd = () => {
            track.removeEventListener('transitionend', onEnd);

            // Move first slide to end (loop)
            const first = track.firstElementChild;
            if (first) track.appendChild(first);

            // Snap back to centered position (no animation)
            track.classList.add('is-no-anim');
            track.style.transform = `translateX(${-step}px)`;
            track.getBoundingClientRect(); // force reflow
            track.classList.remove('is-no-anim');

            setActiveCenter();
            isAnimating = false;
          };

          track.addEventListener('transitionend', onEnd);
        }

        function start() {
          if (timer) window.clearInterval(timer);
          timer = window.setInterval(shiftLeft, intervalMs);
        }

        // Init: reorder so persona 1 starts centered (index 1)
        const s0 = slides();
        if (s0.length >= 3) {
          const last = track.lastElementChild;
          if (last) track.insertBefore(last, track.firstElementChild);
        }

        setActiveCenter();
        applyCentering();
        start();

        window.addEventListener('resize', () => {
          applyCentering();
        });

        document.addEventListener('visibilitychange', () => {
          if (document.hidden) {
            if (timer) window.clearInterval(timer);
          } else {
            applyCentering();
            start();
          }
        });
      })();
    </script>
  </body>
</html>
